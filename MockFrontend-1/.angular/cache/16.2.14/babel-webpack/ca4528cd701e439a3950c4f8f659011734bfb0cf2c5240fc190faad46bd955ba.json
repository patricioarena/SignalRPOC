{"ast":null,"code":"import * as signalR from '@aspnet/signalr';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./viewers-card/viewers-card.component\";\nexport class AppComponent {\n  constructor() {\n    this.usuarios = [{\n      nombreUsuario: \"jdoe\",\n      idUsuario: 1,\n      email: \"jdoe@example.com\",\n      cargo: \"Desarrollador\",\n      imagenUsuario: \"https://mighty.tools/mockmind-api/content/human/65.jpg\"\n    }, {\n      nombreUsuario: \"asmith\",\n      idUsuario: 2,\n      email: \"asmith@example.com\",\n      cargo: \"Diseñador\",\n      imagenUsuario: \"https://mighty.tools/mockmind-api/content/human/44.jpg\"\n    }, {\n      nombreUsuario: \"mjohnson\",\n      idUsuario: 3,\n      email: \"mjohnson@example.com\",\n      cargo: \"Gerente\",\n      imagenUsuario: \"https://mighty.tools/mockmind-api/content/human/41.jpg\"\n    }, {\n      nombreUsuario: \"krodriguez\",\n      idUsuario: 4,\n      email: \"krodriguez@example.com\",\n      cargo: \"Administrador\",\n      imagenUsuario: \"https://mighty.tools/mockmind-api/content/human/46.jpg\"\n    }, {\n      nombreUsuario: \"fbrown\",\n      idUsuario: 5,\n      email: \"fbrown@example.com\",\n      cargo: \"Soporte Técnico\",\n      imagenUsuario: \"https://mighty.tools/mockmind-api/content/human/37.jpg\"\n    }];\n    this.hoveredViewer = null;\n    this.title = 'SignalRPOC';\n    this.connectionName = \"alice\";\n  }\n  showViewerCard(usuario) {\n    this.hoveredViewer = usuario;\n  }\n  hideViewerCard() {\n    this.hoveredViewer = null;\n  }\n  ngOnInit() {\n    this.usuarios.forEach(usuario => {\n      console.log(usuario);\n    });\n    this.hubConnection = new signalR.HubConnectionBuilder().withUrl(`https://localhost:44385/SignalHub?connectionName=${this.connectionName}`).build();\n    this.hubConnection.start().then(() => {\n      console.log(\"connection started\");\n    }).catch(err => console.error(err));\n    this.hubConnection.onclose(() => {\n      // debugger;\n      setTimeout(() => {\n        // debugger;\n        this.hubConnection.start().then(() => {\n          // debugger;\n          console.log(\"connection started\");\n        }).catch(err => console.error(err));\n      }, 5000);\n    });\n    this.hubConnection.on(\"clientMethodName\", data => {\n      // debugger;\n      console.log(`clientMethodName: ${data}`);\n      this.showNotification();\n    });\n    this.hubConnection.on(\"WelcomeMethodName\", data => {\n      // debugger;\n      console.log(`WelcomeMethodName: ${data}`);\n      this.hubConnection.invoke(\"GetDataFromClient\", \"user id\", data).catch(err => console.error(err));\n    });\n  }\n  ngOnDestroy() {\n    this.hubConnection.off(\"askServerResponse\");\n  }\n  showNotification() {\n    console.log('showNotification');\n    var notification = new Notification(this.connectionName, {\n      body: 'You clicked on the button !',\n      icon: 'https://i.pinimg.com/originals/35/0e/dd/350edd537688ad50ea3c5615e02ba84e.jpg'\n    });\n    setTimeout(function () {\n      notification.close();\n    }, 5000);\n  }\n  static #_ = this.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)();\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 1,\n    vars: 1,\n    consts: [[3, \"usuarios\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-viewers-card\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"usuarios\", ctx.usuarios);\n      }\n    },\n    dependencies: [i1.ViewersCardComponent],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["signalR","AppComponent","constructor","usuarios","nombreUsuario","idUsuario","email","cargo","imagenUsuario","hoveredViewer","title","connectionName","showViewerCard","usuario","hideViewerCard","ngOnInit","forEach","console","log","hubConnection","HubConnectionBuilder","withUrl","build","start","then","catch","err","error","onclose","setTimeout","on","data","showNotification","invoke","ngOnDestroy","off","notification","Notification","body","icon","close","_","_2","selectors","decls","vars","consts","template","AppComponent_Template","rf","ctx","i0","ɵɵelement","ɵɵproperty"],"sources":["C:\\Users\\Ayelen\\Desktop\\SignalRPOC\\MockFrontend-1\\src\\app\\app.component.ts","C:\\Users\\Ayelen\\Desktop\\SignalRPOC\\MockFrontend-1\\src\\app\\app.component.html"],"sourcesContent":["import { HttpHeaders } from '@angular/common/http';\r\nimport { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { HubConnection } from '@aspnet/signalr';\r\nimport * as signalR from '@aspnet/signalr';\r\nimport { Usuario } from './Usuario';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\n\r\nexport class AppComponent implements OnInit, OnDestroy {\r\n\r\n  usuarios: Usuario[] = [\r\n    { nombreUsuario: \"jdoe\", idUsuario: 1, email: \"jdoe@example.com\", cargo: \"Desarrollador\", imagenUsuario: \"https://mighty.tools/mockmind-api/content/human/65.jpg\" },\r\n    { nombreUsuario: \"asmith\", idUsuario: 2, email: \"asmith@example.com\", cargo: \"Diseñador\", imagenUsuario: \"https://mighty.tools/mockmind-api/content/human/44.jpg\" },\r\n    { nombreUsuario: \"mjohnson\", idUsuario: 3, email: \"mjohnson@example.com\", cargo: \"Gerente\", imagenUsuario: \"https://mighty.tools/mockmind-api/content/human/41.jpg\" },\r\n    { nombreUsuario: \"krodriguez\", idUsuario: 4, email: \"krodriguez@example.com\", cargo: \"Administrador\", imagenUsuario: \"https://mighty.tools/mockmind-api/content/human/46.jpg\" },\r\n    { nombreUsuario: \"fbrown\", idUsuario: 5, email: \"fbrown@example.com\", cargo: \"Soporte Técnico\", imagenUsuario: \"https://mighty.tools/mockmind-api/content/human/37.jpg\" }\r\n  ];\r\n\r\n  hoveredViewer: Usuario | null = null;\r\n\r\n  showViewerCard(usuario: Usuario): void {\r\n    this.hoveredViewer = usuario;\r\n  }\r\n\r\n  hideViewerCard(): void {\r\n    this.hoveredViewer = null;\r\n  }\r\n\r\n  title = 'SignalRPOC';\r\n  connectionName = \"alice\";\r\n\r\n  private hubConnection: HubConnection;\r\n\r\n  public ngOnInit() {\r\n\r\n    this.usuarios.forEach(usuario => {\r\n      console.log(usuario);\r\n    });\r\n\r\n    this.hubConnection = new signalR.HubConnectionBuilder()\r\n      .withUrl(`https://localhost:44385/SignalHub?connectionName=${this.connectionName}`)\r\n      .build();\r\n\r\n    this.hubConnection.start().then(() => {\r\n      console.log(\"connection started\");\r\n    }).catch(err => console.error(err));\r\n\r\n    this.hubConnection.onclose(() => {\r\n      // debugger;\r\n      setTimeout(() => {\r\n        // debugger;\r\n        this.hubConnection.start().then(() => {\r\n          // debugger;\r\n          console.log(\"connection started\");\r\n        }).catch(err => console.error(err));\r\n      }, 5000);\r\n    });\r\n\r\n    this.hubConnection.on(\"clientMethodName\", (data) => {\r\n      // debugger;\r\n      console.log(`clientMethodName: ${data}`);\r\n      this.showNotification();\r\n    });\r\n\r\n    this.hubConnection.on(\"WelcomeMethodName\", (data) => {\r\n      // debugger;\r\n      console.log(`WelcomeMethodName: ${data}`);\r\n      this.hubConnection.invoke(\"GetDataFromClient\", \"user id\", data).catch(err => console.error(err));\r\n    });\r\n\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.hubConnection.off(\"askServerResponse\");\r\n  }\r\n\r\n  showNotification() {\r\n      console.log('showNotification');\r\n      var notification = new Notification(this.connectionName, {\r\n        body : 'You clicked on the button !',\r\n        icon : 'https://i.pinimg.com/originals/35/0e/dd/350edd537688ad50ea3c5615e02ba84e.jpg'\r\n      });\r\n\r\n      setTimeout(function() { notification.close(); }, 5000);\r\n  }\r\n\r\n}\r\n","\r\n<app-viewers-card [usuarios]=\"usuarios\"> </app-viewers-card>\r\n\r\n<!--\r\n<div *ngFor=\"let usuario of usuarios\" class=\"viewer-list-item\" (mouseover)=\"showViewerCard(usuario)\" (mouseleave)=\"hideViewerCard()\">\r\n  <img [src]=\"usuario.imagenUsuario\" alt=\"{{ usuario.nombreUsuario }}\" class=\"viewer-thumbnail\">\r\n  <app-viewers-card *ngIf=\"hoveredViewer == usuario\"\r\n    [nombreUsuario]=\"usuario.nombreUsuario\"\r\n    [idUsuario]=\"usuario.idUsuario\"\r\n    [email]=\"usuario.email\"\r\n    [cargo]=\"usuario.cargo\"\r\n    [imagenUsuario]=\"usuario.imagenUsuario\"\r\n    [usuarios]=\"usuarios\"\r\n    >\r\n  </app-viewers-card>\r\n</div> -->\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}